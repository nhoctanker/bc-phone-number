!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n;n="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,n.bcPhoneNumber=e()}}(function(){return function e(n,t,r){function o(i,l){if(!t[i]){if(!n[i]){var a="function"==typeof require&&require;if(!l&&a)return a(i,!0);if(u)return u(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var d=t[i]={exports:{}};n[i][0].call(d.exports,function(e){var t=n[i][1][e];return o(t?t:e)},d,d.exports,e,n,t,r)}return t[i].exports}for(var u="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(e,n,t){angular.module("bcPhoneNumberTemplates",[]).run(["$templateCache",function(e){e.put("bc-phone-number/bc-phone-number.html",'<section class="input-group">\r\n  <div class="input-group-btn" uib-dropdown uib-keyboard-nav>\r\n    <button type="button" class="btn btn-default" type="button" uib-dropdown-toggle>\r\n      <span class="glyphicon iti-flag bc-phone-number-flag" ng-class="selectedCountry.iso2Code"></span><span class="caret"></span>\r\n    </button>\r\n    <ul class="uib-dropdown-menu bc-phone-number-dropdown-menu dropdown-menu" role="menu">\r\n      <li ng-repeat="country in preferredCountries" ng-click="selectCountry(country)"\r\n          ng-class="{active: isCountrySelected(country)}" role="menuitem">\r\n        <a href="#" ng-click="$event.preventDefault()" class="bc-phone-number-country-anchor">\r\n          <i class="glyphicon iti-flag bc-phone-number-country-icon" ng-class="country.iso2Code"></i>\r\n          <span ng-bind="country.name"></span>\r\n        </a>\r\n      </li>\r\n      <li role="separator" class="divider" ng-show="preferredCountries && preferredCountries.length"></li>\r\n      <li ng-repeat="country in allCountries" ng-click="selectCountry(country)"\r\n          ng-class="{active: isCountrySelected(country)}" role="menuitem">\r\n        <a href="#" ng-click="$event.preventDefault()" class="bc-phone-number-country-anchor">\r\n          <i class="glyphicon iti-flag bc-phone-number-country-icon" ng-class="country.iso2Code"></i>\r\n          <span ng-bind="country.name"></span>\r\n        </a>\r\n      </li>\r\n    </ul>\r\n  </div>\r\n  <input type="tel" class="form-control" ng-model="number" ng-disabled="ngDisabled" ng-change="changed()"/>\r\n</section>\r\n')}])},{}],2:[function(e,n,t){(function(t){"use strict";function r(e){for(var n=[],t=0;t<e.length;t++){var r=d.getCountryByIso2Code(e[t]);r&&n.push(r)}return n}function o(e){return e&&!u(e)?"+"+e:e}function u(e){return"+"===e[0]}function l(e){if(e){var n=d.getDialCodeByDigits(d.getDigits(e));return n?a(o(e)):e}return""}function a(e,n,t,r,o){try{var u,l=e.replace(/\D/g,""),a="",s=" ext. ";if("+"==e.substr(0,1)&&(l="+"+l),a=l," "==a.charAt(a.length-1)&&(a=a.substr(0,a.length-1)),t&&!e.split(s)[1]){var d=a;" "==d.charAt(d.length-1)&&(d=d.substr(0,d.length-1));var c=d.substr(d.length-2,1);if(isNaN(parseFloat(c)))return d.substr(0,d.length-1);if(r&&a&&d.length<=a.length&&d.indexOf(" ")==-1&&!o)return a+s}return u==-1&&(a+=s+l.substring(i,l.length)),a}catch(f){return e}}function s(e,n,t){if(e){var r=d.getDigits(e),o=d.getDialCodeByDigits(r);if(o){var u=r.replace(o,t);if(n)var i=d.formatNumber(u);else i=l(u);return i}return n?d.formatNumber("+"+t+r):l("+"+t+r)}return"+"+t}var d="undefined"!=typeof window?window.bcCountries:"undefined"!=typeof t?t.bcCountries:null,c="undefined"!=typeof window?window.angular:"undefined"!=typeof t?t.angular:null;t.angular=c,e("../build/js/templates"),c.module("bcPhoneNumber",["bcPhoneNumberTemplates","ui.bootstrap"]).service("bcPhoneNumber",function(){this.isValid=d.isValidNumber,this.format=d.formatNumber}).directive("bcPhoneNumber",function(){if("undefined"==typeof d)throw new"bc-countries not found, did you forget to load the Javascript?";return{templateUrl:function(e,n){return n.template?n.template:"bc-phone-number/bc-phone-number.html"},require:"ngModel",scope:{preferredCountriesCodes:"@preferredCountries",defaultCountryCode:"@defaultCountry",selectedCountry:"=",countryCodes:"=",isValid:"=",ngModel:"=",ngChange:"=",ngDisabled:"="},link:function(e,n,t,o){if(e.selectedCountry=d.getCountryByIso2Code(e.defaultCountryCode||"us"),e.allCountries=d.getAllCountries(),e.name="phoneNumber",e.autoSetValidity=!1,t.autoSetValidity&&(e.autoSetValidity=t.autoSetValidity),t.name&&(e.name=t.name),t.allowFormatNumber?e.allowFormatNumber=c.copy(t.allowFormatNumber):e.allowFormatNumber=!1,e.countryCodes?(e.allCountries=[],e.countryCodes.forEach(function(n){e.allCountries.push(d.getCountryByIso2Code(n))})):e.allCountries=d.getAllCountries(),e.number=e.ngModel,e.changed=function(){"function"==typeof e.ngChange&&e.ngChange()},e.preferredCountriesCodes){var u=e.preferredCountriesCodes.split(" ");e.preferredCountries=r(u)}e.selectCountry=function(n){e.selectedCountry=n,e.number=e.ngModel=s(e.number,e.allowFormatNumber,n.dialCode)},e.isCountrySelected=function(n){return n.iso2Code==e.selectedCountry.iso2Code},e.resetCountry=function(){var n=e.defaultCountryCode;if(n){var t=d.getCountryByIso2Code(n),r=s(e.number,e.allowFormatNumber,t.dialCode);e.selectedCountry=t,e.ngModel=r,e.number=r}},e.resetCountry(),e.$watch("ngModel",function(n){e.number=n}),e.$watch("number",function(n){if(e.isValid=d.isValidNumber(n),e.isValid&&e.countryCodes){var t=d.getDigits(n),r=d.getIso2CodeByDigits(t);e.isValid=e.countryCodes.indexOf(r)>=0}e.autoSetValidity&&o.$setValidity("phoneNumber",e.isValid)}),e.$watch("number",function(n){if(""===n)e.ngModel="";else if(n){var t=d.getDigits(n),r=d.getIso2CodeByDigits(t);if(r){var o=d.getDialCodeByDigits(t),u=l(n);o!==e.selectedCountry.dialCode&&e.selectedCountry.dialCode&&(e.selectedCountry=d.getCountryByIso2Code(r)),e.ngModel=u,e.number=u}else e.ngModel=n}})}}}),n.exports="bcPhoneNumber"}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../build/js/templates":1}]},{},[2])(2)});